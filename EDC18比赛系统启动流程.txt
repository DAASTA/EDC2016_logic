
EDC18比赛系统启动流程

器材和人员

- Dobby
    - 需要一台安装了Dobby控制软件`Do.Fun`的手机。
    - 上位机Wifi模块。
- UWB
    - Anchor的供电：充电宝。
    - Tag的供电：航模电池。
- 通讯模块
    - 上位机板。
- 【边裁 杜昱博】地图
    - 规则有效部分的尺寸2.05m*2.05m。
- 摄像头
    - USB延长线。
- 【主屏幕 陈奕鑫】主屏幕
    - 连接UWB模块，通讯模块，摄像头
    - 连接Dobby的Wifi。
    - 运行游戏主程序。
    - 运行UWB程序。
- 【副屏幕 张贺然】副屏幕
    - 连接控制Dobby的手机。
    - 连接互联网。
    - 运行屏幕投影软件`Total Control`。
- 【主裁判 王旭康】控制Dobby的手机
    - 连接Dobby的Wifi。
    - 通过数据线连接副屏幕。
    - 运行Dobby控制软件，负责控制Dobby的起飞和降落，并接收Dobby摄像头数据。
    - 运行屏幕投影软件`Total Control`
- 【监视 温拓朴】监视Dobby
    - 连接Dobby的Wifi。通过SSH登录。
    - 运行UDP信息接收端。
    - 运行飞控程序。
- 【计分员】
- 【计时员】
    
流程：

1. 布置场地

- 组装框架。
- 安装摄像头。
- 放置地图。
- 放置UWB，并测量相对地图的坐标。
    - 红十字(-0.12, -0.12) 绿十字(2.17, -0.12) 蓝十字(-0.12, 2.17) 黑十字(2.17, 2.17)。

2. 配置软件环境

2.1 启动上位机

- 主屏幕：游戏主程序
    - 检查通讯模块的驱动程序。
    - 获得通讯模块的端口号。
    - 检查摄像头的连接。
    - 手动标定4个十字。
    - 启动游戏主程序。
- 主屏幕：UWB程序
    - 检查UWB模块的驱动程序。
    - 检查UWB模块的连接。
    - 启动UWB程序。
    - Tag上电，检查输出是否正常。
    - 将计算模式改为Averag。
- Dobby
    - 安装Tag。
    - 开启Dobby。
- 副屏幕和控制Dobby的手机：
    - 运行屏幕投影软件`Total Control`。

2.2 连接

- 主屏幕：
    - 连接Dobby的Wifi
- 控制Dobby的手机：
    - 连接Dobby的Wifi
    - 打开`Do.Fun`检查数据接收。
- 监视Dobby：
    - 连接Dobby的Wifi
    - 启动UDP连接程序

2.3 选手准备

- 选手放置自己的小车，然后离场。
- 主屏幕：
    - 游戏程序按下RESET。
    
2.4 启动Dobby

- 监视Dobby：
    - 启动飞控程序。
- 控制Dobby的手机：
    - 起飞。
    
2.5 游戏开始

- 主屏幕：
    - 按下START

2.6 暂停

- 主屏幕点击PAUSE后，举手向主裁判示意。
    - 主裁判拒绝暂停：做出挥双手的无效手势。主屏幕点击START，游戏继续。
    - 主裁判同意暂停：做出暂停手势。进入下一步。
- 控制Dobby的手机：
    - 降落。
- 边裁计时事件。边裁处理事件。完成后，小车重新放回场内。
- 边裁向主裁举手示意。
- 监视Dobby：
    - 启动飞控程序。
- 控制Dobby的手机：
    - 起飞。
- 主裁向主屏幕举手示意。
- 主屏幕点击START，游戏继续。

2.7 游戏结束

- 主屏幕向主裁判举手示意。
- 控制Dobby的手机：
    - 降落。
- 记分员计分。

2.8 重新开始

- 回到2.3。