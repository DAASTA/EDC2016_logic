# 规则

比赛采取1V1对抗模式，在黑白两色图案组成的地图中进行。

小车以抢点为主要目标。比赛过程中，目标点、道具、无人机等多种因素都会影响小车生命值。

一方生命值归零或时间用尽时比赛结束。结束时生命值较多的队伍获胜。

## 小车

- 官方提供
    - 框架（亚克力板，铜柱），允许合理改装，*但长宽不能超过20cm*
    - 控制器（单片机/FPGA/DSP）
    - 电机，必须使用官方规定型号的电机（公平性）
    - 通讯板（带有部分的电机管理功能），必须使用官方通讯板并按要求连接电机
    - 定位色块，进行比赛前必须安装定位色块
- 自行设计
    - 传感器
    - 驱动电路板（可以在李兆基大楼，创新实验室对面印制）
    - 其他合理的机械结构，*但静态时长宽不能超过20cm*
- 允许小车之间利用合理的碰撞、推挤、冲击争夺目标位置，但不允许
    - 破坏对方小车物理结构
    - 尝试长时间限制对方小车行动，例如架空/锁死/掀翻等
    - 干扰通讯模块和定位模块
    - 破坏地图

## 目标点

- 在场地内的目标点
    - 同一时刻最多只有一个
    - 位置随机，黑白任意
    - 被争抢之后自动消失
    - 消失后的一段时间里自动刷新
    - 目标点所在位置的颜色称为**目标点颜色**
- 占点：处在和目标点颜色相同的区域内，并距离目标点比较近的小车视作处在占点状态。
    - 非占点的一或两辆小车将持续扣除生命值
    - 占点小车到目标的距离决定了**远占**和**近占**两种模式，其减血速度不同。
    - 一个目标点的消失判定：按照对非占点小车的伤害计算。只要此目标点累积对非占点小车造成了一定的伤害，目标点消失。
    - *当前设定20160924，一个目标点伤害量为40HP，一个小车血量为200HP；近占下伤害速度8HP/s，远占下伤害速度2HP/s。因此一个目标点持续存在时间为5s~20s。目标点冷却时间5s。*

## 地图

- 地图尺寸约2.5m*2.5m，由黑白两色组成
    - 不保证黑色或白色区域连续。
    - 决赛地图不提前公布。预赛和初赛地图将提前公布。
- 当某一方小车持续处在出界状态，不人工干涉无法回到场地中时，裁判将暂停比赛。出界方在此瞬间给予生命值惩罚。然后工作人员将小车重新放回场内，比赛继续。显然，多次被判出界将直接导致对战失败。
    - *当前设定20160925，被判持续出界一次惩罚30HP*

## 无人机

> 完整的无人机规则只适用于决赛。合适时无人机将由上位机模拟以进行测试。

- 无人机有攻击和治疗两种状态，对其投影点附近一定范围内的小车产生影响。选手可通过通讯模块获得无人机的位置坐标。
- 无人机状态由当前目标点颜色决定：
    - 目标点为黑色：无人机变为攻击状态 
    - 目标点为白色：无人机变为治疗状态 
    - *当前设定20160924，攻击速度8HP/s，治疗的速度4HP/s，目标点消失时，无人机状态不变。小车血量不会超过200HP上限。*
- 无人机在默认情况下为中立的，自动巡航地图。特别的，当选手使用道具制空权时，选手可以利用通讯模块发送指令指定无人机的目标点，控制无人机的行动。

## 道具

- 黑白颠倒
    - 当前目标点立即消失，并立即产生一个和当前目标点颜色不同的目标点，飞机状态也立即随之改变
    - 若当前目标点不存在，参考当前无人机的状态颜色。
- 制空权
    - 小车可以在一定时间内控制无人机的行动 
    - 此道具的使用意味着上一次制空权的效果立即终止
    - *当前设定20160924，制空权持续时间10s*
- 恢复生命
    - 增加生命值
    - *当前设定20160924，增加30HP*
- 小车只要距离道具在一段距离内，道具立即自动生效。
- *当前设定20160925，场上最多1个道具。道具冷却时间10s*

## 通讯

- 坐标分辨率一律为0~255，这样16位可以表示一个二维坐标。
- 上位机->小车
    - 小车坐标(16*2)
    - 目标点坐标(16)
    - 无人机的投影坐标(16)
    - 小车的血量(8*2)
    - 道具坐标(16)
    - 道具类型(2)
    - 游戏时间(14)
    - 小车的状态
        - 目标点是否存在(1)，目标点颜色(1)
        - 受到目标点伤害(1)，受到大量的目标点伤害(1)
        - 是否受到飞机伤害(1)
        - 是否被飞机回血(1)
        - 自己是否正在控制飞机(1)
- 小车->上位机
    - 无人机目标点坐标(16)

# 赛程

### 开发套件领取

暂定时间 10.7 左右

### 预审

暂定时间 10.23

- 一场测试只有一组选手参加。
- 场上只有一个一种道具“+HP”。道具定时刷新。
- 地图为白色环形。
- 不涉及无人机。

以下是评级标准。评级只影响初赛分组。

- A: 得到"+HP"道具>=2次。
- B: 在白色区域内绕场2圈及以上。
- C: 能够在地图范围内前进和转弯。
- D: 队长携小车签到。

### 初赛

初定日期 11.13

小组赛

- 按照预赛等级分组。具体情况视预赛情况决定。
- 小组循环赛排名靠前的队伍进入决赛。
    - (世界杯规则) 取胜得3分，平局得1分；
    - 小分顺序为 
        - (1)净胜时间（胜利后剩余的时间-失败后剩余的时间）
        - (2)净胜血量
        - (3)绝对血量

初赛中无人机由上位机虚拟。

### 决赛

初定日期 11.27

淘汰赛